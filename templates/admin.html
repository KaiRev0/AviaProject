{% extends "base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞{% endblock %}

{% block content %}
<div class="dashboard admin-dashboard">
    <h2>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
    
    <div class="admin-header">
        <div class="admin-info">
        </div>
        <div class="admin-actions">
            <a href="/logout" class="btn logout-btn">–í—ã–π—Ç–∏</a>
        </div>
    </div>
    
    <!-- –ö–†–ê–¢–ö–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
    <div class="admin-stats">
        <h3>üìä –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">{{ cashiers_count }}</div>
                <div class="stat-label">–ö–∞—Å—Å–∏—Ä–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ clients_count }}</div>
                <div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ flights_count }}</div>
                <div class="stat-label">–†–µ–π—Å–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ active_tickets }}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤</div>
            </div>
        </div>
    </div>
    
    <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
    <div class="admin-controls">
        <h3>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</h3>
        
        <div class="control-grid">
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Å–∞–º–∏ -->
            <div class="control-section">
                <h4>‚úàÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Å–∞–º–∏</h4>
                <div class="control-buttons">
                    <a href="/admin/flights" class="control-btn">
                        <span class="control-icon">üìã</span>
                        <span class="control-text">–°–ø–∏—Å–æ–∫ —Ä–µ–π—Å–æ–≤</span>
                    </a>
                    <a href="/admin/flights/add" class="control-btn">
                        <span class="control-icon">‚ûï</span>
                        <span class="control-text">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–π—Å</span>
                    </a>
                    <a href="/admin/flights?status=active" class="control-btn">
                        <span class="control-icon">‚úÖ</span>
                        <span class="control-text">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–π—Å—ã</span>
                    </a>
                    <a href="/admin/flights?status=cancelled" class="control-btn">
                        <span class="control-icon">‚ùå</span>
                        <span class="control-text">–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ —Ä–µ–π—Å—ã</span>
                    </a>
                </div>
            </div>
            
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ -->
            <div class="control-section">
                <h4>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏</h4>
                <div class="control-buttons">
                    <a href="/admin/staff" class="control-btn">
                        <span class="control-icon">üìã</span>
                        <span class="control-text">–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</span>
                    </a>
                    <a href="/admin/staff/add" class="control-btn">
                        <span class="control-icon">‚ûï</span>
                        <span class="control-text">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</span>
                    </a>
                    <a href="/admin/staff?role=cashier" class="control-btn">
                        <span class="control-icon">üíº</span>
                        <span class="control-text">–ö–∞—Å—Å–∏—Ä—ã</span>
                    </a>
                    <a href="/admin/staff?role=admin" class="control-btn">
                        <span class="control-icon">üëë</span>
                        <span class="control-text">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</span>
                    </a>
                </div>
            </div>
            
            <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã -->
            <div class="control-section">
                <h4>üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h4>
                <div class="control-buttons">
                    <button class="control-btn" onclick="location.reload()">
                        <span class="control-icon">üîÑ</span>
                        <span class="control-text">–û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</span>
                    </button>
                    <button class="control-btn" onclick="showBackupAlert()">
                        <span class="control-icon">üíæ</span>
                        <span class="control-text">–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è</span>
                    </button>
                    <button class="control-btn" onclick="showLogsAlert()">
                        <span class="control-icon">üìã</span>
                        <span class="control-text">–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏</span>
                    </button>
                    <button class="control-btn" onclick="showSettingsAlert()">
                        <span class="control-icon">‚öôÔ∏è</span>
                        <span class="control-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ü–û–°–õ–ï–î–ù–Ø–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨ -->
    <div class="recent-activity">
        <h3>üìà –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
        
        {% if recent_activity %}
        <div class="activity-list">
            {% for user in recent_activity %}
            <div class="activity-item">
                <div class="activity-user">
                    <span class="user-role {{ user.role }}">
                        {{ 'üëë' if user.role == 'admin' else 'üíº' if user.role == 'cashier' else 'üë§' }}
                        {{ user.phone }}
                    </span>
                    <span class="user-status">{{ user.role }}</span>
                </div>
                <div class="activity-info">
                    <span class="activity-time">
                        {% if user.last_login %}
                        {{ user.last_login[:19] }}
                        {% else %}
                        –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—Ö–æ–¥–∏–ª
                        {% endif %}
                    </span>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="no-activity">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
        {% endif %}
    </div>
</div>

<script>
function showBackupAlert() {
    alert('–í —É—á–µ–±–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞');
}

function showLogsAlert() {
    alert('–í —É—á–µ–±–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã');
}

function showSettingsAlert() {
    alert('–í —É—á–µ–±–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã');
}
</script>
{% endblock %}